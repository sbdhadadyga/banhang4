<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>L√†m ng∆∞·ªùi y√™u anh nh√©? üíò</title>
  <meta name="description" content="Trang web t·ªè t√¨nh d·ªÖ th∆∞∆°ng: n√∫t 'Kh√¥ng' n√© chu·ªôt, n√∫t 'C√≥' m·ªü l·ªùi y√™u." />
  <style>
    :root{
      --bg1:#ffdee9;
      --bg2:#b5fffc;
      --text:#2d1b2d;
      --yes:#16a34a;
      --no:#ef4444;
      --card:#ffffffcc;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 700px at 20% 10%, #ffd1dc 0%, transparent 60%),
                  radial-gradient(900px 600px at 80% 30%, #d1ffd8 0%, transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow:hidden;
    }
    /* Tr√°i tim n·ªÅn */
    .float-heart{
      position:fixed; left:0; top:0; width:100%; height:100%;
      pointer-events:none; overflow:hidden; z-index:0;
    }
    .float-heart span{
      position:absolute; font-size:18px; opacity:.7; animation: rise 8s linear infinite;
      filter: drop-shadow(0 2px 2px #00000022);
    }
    @keyframes rise{
      0%{transform: translateY(110vh) translateX(0) rotate(0); opacity:0}
      10%{opacity:.8}
      100%{transform: translateY(-10vh) translateX(var(--dx)) rotate(360deg); opacity:0}
    }

    /* Khung c√¢u h·ªèi */
    .wrap{
      position:relative; width:100%; height:100%;
      display:grid; place-items:center; padding:20px;
    }
    .card{
      position:relative; z-index:2;
      width:min(560px, 92vw);
      background:var(--card);
      backdrop-filter: blur(6px);
      border-radius:20px; padding:28px 22px 26px;
      box-shadow: 0 10px 30px #0000001a, inset 0 0 0 1px #ffffff66;
      text-align:center;
    }
    h1{
      margin:0 0 12px; font-size:clamp(24px, 4.8vw, 36px);
      line-height:1.15;
    }
    p.lead{
      margin:0 0 22px; font-size:clamp(14px, 3.8vw, 18px); opacity:.9;
    }
    .btns{
      position:relative; height:140px; /* ch·ª´a kh√¥ng gian cho n√∫t 'Kh√¥ng' ch·∫°y */
    }
    button{
      font: inherit; font-weight:700;
      border:none; border-radius:999px; padding:14px 22px;
      cursor:pointer; transition:.15s transform ease, .2s box-shadow ease, .2s background ease;
      box-shadow:0 8px 20px #00000018;
      user-select:none; -webkit-tap-highlight-color: transparent;
    }
    button:active{ transform: scale(.98) }
    #yesBtn{
      background:var(--yes); color:white; margin:0 10px; min-width:110px;
    }
    #noBtn{
      background:var(--no); color:white; min-width:110px;
      position:absolute; /* ƒë·ªÉ n√© chu·ªôt */
      left:50%; top:50%; transform:translate(-50%, -50%);
    }

    /* Modal l·ªùi y√™u */
    .modal{
      position:fixed; inset:0; display:none; place-items:center; z-index:5;
      background: #00000055; backdrop-filter: blur(4px);
      padding:20px;
    }
    .modal.show{ display:grid; }
    .modal-card{
      width:min(520px, 92vw);
      background:#fff; border-radius:18px; padding:28px 22px;
      text-align:center; box-shadow:0 10px 30px #00000033;
      position:relative;
    }
    .modal-card h2{ margin:0 0 6px }
    .modal-card p{ margin:8px 0 18px }
    .close{
      position:absolute; right:10px; top:10px;
      background:#f3f4f6; border-radius:10px; padding:6px 10px; font-weight:700;
    }

    /* Canvas ph√°o gi·∫•y */
    canvas#confetti{ position:fixed; inset:0; pointer-events:none; z-index:6; }

    /* G·ª£i √Ω copy link */
    .foot{
      margin-top:14px; font-size:13px; opacity:.75;
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="float-heart" id="floatHeart"></div>

  <div class="wrap" id="stage">
    <div class="card">
      <h1>L√†m v·ª£ em nh√©? üíñ</h1>
      <p class="lead">Em h·ª©a em kh√¥ng ph·∫£n b·ªôi v·ªõi v≈© phu ch·ªã ƒë√¢u v·ªõi y√™u th∆∞∆°ng chƒÉm s√≥c ch·ªã n·ªØa ü§û</p>
      <div class="btns">
        <button id="yesBtn" aria-label="ƒê·ªìng √Ω">C√≥ üòò</button>
        <button id="noBtn" aria-label="T·ª´ ch·ªëi">Kh√¥ng üôà</button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <button class="close" id="closeModal" aria-label="ƒê√≥ng">‚úï</button>
      <h2>Yeyyy! Ch·ªã ƒë·ªìng √Ω r·ªìi! ü•≥</h2>
      <p>C·∫£m ∆°n ch·ªã ƒë√£ tin t∆∞·ªüng ch·ªçn em nhaaaaa y√™u ch·ªã nh·∫•t lunnnn‚ô•Ô∏è<br/>C·∫£m ∆°n ch·ªã ƒë√£ b·∫•m ‚ÄúC√≥‚Äù üíû</p>
      <button id="okBtn">Oki lunn‚ô•Ô∏è</button>
    </div>
  </div>

  <script>
    // ========== HEART BACKGROUND ==========
    (function hearts(){
      const wrap = document.getElementById('floatHeart');
      const num = 24;
      const emojis = ['üíó','üíñ','üíò','üíù','üíì','‚ù§Ô∏è'];
      for (let i=0;i<num;i++){
        const s = document.createElement('span');
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        s.style.left = Math.random()*100 + 'vw';
        s.style.setProperty('--dx', (Math.random()*80 - 40) + 'vw');
        s.style.animationDelay = (-Math.random()*8) + 's';
        s.style.fontSize = (16 + Math.random()*22) + 'px';
        wrap.appendChild(s);
      }
    })();

    // ========== BUTTON LOGIC ==========
    const stage = document.getElementById('stage');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn  = document.getElementById('noBtn');
    const modal  = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    const okBtn = document.getElementById('okBtn');

    // Di chuy·ªÉn "Kh√¥ng" t·ªõi v·ªã tr√≠ ng·∫´u nhi√™n trong v√πng .btns
    function moveNoButton(ev){
      const container = noBtn.parentElement.getBoundingClientRect();
      const btn = noBtn.getBoundingClientRect();
      const pad = 6;

      // t·∫°o v·ªã tr√≠ m·ªõi ng·∫´u nhi√™n nh∆∞ng v·∫´n trong khung
      let nx = Math.random() * (container.width - btn.width - pad*2) + pad;
      let ny = Math.random() * (container.height - btn.height - pad*2) + pad;

      // n·∫øu c√≥ t·ªça ƒë·ªô con tr·ªè, ƒë·∫©y n√∫t ra xa con tr·ªè m·ªôt ch√∫t
      if (ev && ev.clientX !== undefined){
        const mx = ev.clientX - container.left;
        const my = ev.clientY - container.top;
        const dx = nx - mx, dy = ny - my;
        const dist = Math.hypot(dx,dy) || 1;
        if (dist < 120){
          nx = Math.min(Math.max(mx + dx/dist*160, pad), container.width - btn.width - pad);
          ny = Math.min(Math.max(my + dy/dist*160, pad), container.height - btn.height - pad);
        }
      }

      noBtn.style.left = nx + 'px';
      noBtn.style.top  = ny + 'px';
      noBtn.style.transform = 'translate(0,0)'; // b·ªè transform trung t√¢m ban ƒë·∫ßu
    }

    // N√© chu·ªôt (desktop)
    noBtn.addEventListener('pointerenter', moveNoButton);
    stage.addEventListener('pointermove', (e)=>{
      // n·∫øu con tr·ªè ·ªü g·∫ßn n√∫t "Kh√¥ng" th√¨ n√© th√™m
      const btn = noBtn.getBoundingClientRect();
      const near = 100;
      if (e.clientX > btn.left-near && e.clientX < btn.right+near &&
          e.clientY > btn.top-near  && e.clientY < btn.bottom+near){
        moveNoButton(e);
      }
    });
    // N√© khi ch·∫°m (mobile)
    noBtn.addEventListener('touchstart', (e)=>{ e.preventDefault(); moveNoButton(); }, {passive:false});
    // NgƒÉn click ƒë∆∞·ª£c v√†o "Kh√¥ng"
    noBtn.addEventListener('click', (e)=>{ e.preventDefault(); moveNoButton(e); });

    // B·∫•m "C√≥" -> m·ªü modal + ph√°o gi·∫•y
    yesBtn.addEventListener('click', ()=>{
      modal.classList.add('show');
      burstConfetti();
    });
    [closeModal, okBtn].forEach(el=>el.addEventListener('click', ()=> modal.classList.remove('show')));

    // ========== CONFETTI (t·ª± vi·∫øt, kh√¥ng d√πng th∆∞ vi·ªán) ==========
    (function setupConfetti(){
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = innerWidth;
      let H = canvas.height = innerHeight;
      const pieces = [];
      const COLORS = ['#f87171','#fb7185','#fbbf24','#34d399','#60a5fa','#a78bfa','#f472b6','#f59e0b'];

      function rand(n){ return Math.random()*n }
      function Piece(){
        this.x = rand(W);
        this.y = -10;
        this.w = 6 + rand(6);
        this.h = 8 + rand(10);
        this.vx = -2 + rand(4);
        this.vy = 2 + rand(3);
        this.rot = rand(Math.PI*2);
        this.vr = -0.2 + rand(0.4);
        this.color = COLORS[(Math.random()*COLORS.length)|0];
        this.life = 0; this.max = 180 + (rand(120));
      }
      function resize(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight; }
      window.addEventListener('resize', resize);

      function update(){
        ctx.clearRect(0,0,W,H);
        for (let i=pieces.length-1; i>=0; i--){
          const p = pieces[i];
          p.x += p.vx; p.y += p.vy; p.rot += p.vr; p.vy += 0.03; p.life++;
          if (p.x<-20||p.x>W+20||p.y>H+20||p.life>p.max){ pieces.splice(i,1); continue; }
          ctx.save();
          ctx.translate(p.x,p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
          ctx.restore();
        }
        requestAnimationFrame(update);
      }
      update();

      window.burstConfetti = function burstConfetti(){
        for (let i=0;i<180;i++) pieces.push(new Piece());
      };
    })();

    // ƒê·∫∑t v·ªã tr√≠ ban ƒë·∫ßu c·ªßa n√∫t "Kh√¥ng"
    window.addEventListener('load', ()=> moveNoButton());
  </script>
</body>
</html>
